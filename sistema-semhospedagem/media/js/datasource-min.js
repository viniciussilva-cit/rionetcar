(function(){var a=CPANEL.application==="whostmgr";YAHOO.util.DataSourceBase.prototype.get_field_parser=function(j){var g,k="string";try{g=this.responseSchema.fields}catch(i){}if(g){for(var h=0;h<g.length;h++){if(g[h].key===j){k=g[h].parser||k;break}}}return k};var b={responseType:YAHOO.util.DataSource.TYPE_JSON,connXhrMode:"cancelStaleRequests",connMethodPost:true,api_version:a?1:2,responseSchema:{resultsList:a?"data":"cpanelresult.data",metaFields:{total_records:a?"metadata.chunk.records":"cpanelresult.paginate.total_results",before_filter:a?"metadata.filter.filtered":"cpanelresult.before_filter",metadata:a?"metadata":"cpanelresult.metadata"}}};var f=function(h){var g={};YAHOO.lang.augmentObject(g,b);YAHOO.lang.augmentObject(g,h);if(g.fields){g.responseSchema.fields=g.fields;delete g.fields}var e=CPANEL.security_token+"/json-api/"+(CPANEL.application==="whostmgr")?h.func:"";f.superclass.constructor.call(this,e,g)};YAHOO.lang.extend(f,YAHOO.util.XHRDataSource,{parseJSONData:function(k,e){if(a&&(this.api_version===1)){var l=e.data;if((typeof l==="object")&&!(l instanceof Array)){var j=Object.keys(l);if(j.length===1){var i=l[j[0]];if(i instanceof Array){e.data=i}else{if(!i){e.data=[]}}}}}var h=f.superclass.parseJSONData.call(this,k,e);if(CPANEL.api&&CPANEL.api.find_api_error){var g=CPANEL.api.find_api_error(e);if(g){h.error=true;if(g!==true){h.cpanel_error=g}}}return h},makeConnection:function(h,e,g){if(typeof h==="object"){h=YAHOO.lang.JSON.parse(YAHOO.lang.JSON.stringify(h));this.liveData=CPANEL.security_token+"/json-api/";if(CPANEL.application==="whostmgr"){this.liveData+=this.func}else{this.liveData+="cpanel";h.module=this.module;h.func=this.func}if(!h.api_data){h.api_data={}}h.api_data.version=this.api_version;if(this.request_data){if(!h.data){h.data={}}YAHOO.lang.augmentObject(h.data,this.request_data)}h=CPANEL.api.construct_query(h)}return f.superclass.makeConnection.call(this,h,e,g)}});var d={CPANEL_XHRDataSource:f};try{CPANEL.datasource=d}catch(c){}return d}());